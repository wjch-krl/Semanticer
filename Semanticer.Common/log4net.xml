<log4net>
  <appender name="pgsqlDetailsApperner" type="log4net.Appender.AdoNetAppender">
    <connectionType value="Npgsql.NpgsqlConnection, Npgsql"/>
    <connectionString value="Server=ikar;Port=5432;Database=SocialBI_Main_PostsData;User Id=postgres;Password=postgres;" />
    <bufferSize value="10" />
    <commandText value="INSERT INTO reports_log_details (log_detail_date, log_detail_time, log_detail_find_count, log_detail_count, Log_detail_type, log_detail_message, profilepk_pro_id, reports_log_id, log_detail_log,log_detail_type_desc, log_level) 
							VALUES (:log_date, :time, :match_count, :count, :log_type, :message, :proid, :logid, :detail, :type_desc, :log_level)" />

    <parameter>
      <parameterName value="log_date" />
      <dbType value="DateTime" />
      <layout type="log4net.Layout.RawTimeStampLayout" />
    </parameter>
    <parameter>
      <parameterName value="time" />
      <dbType value="Int64" />
      <layout type="ComarchBI.SocialIntelligence.Common.Logger.JobCompleteLayoutPattern">
        <conversionPattern value="%actionInfo{completitiontime}" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="log_level" />
      <dbType value="String" />
      <size value="50" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%level" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="count" />
      <dbType value="Int32" />
      <layout type="ComarchBI.SocialIntelligence.Common.Logger.JobCompleteLayoutPattern">
        <conversionPattern value="%actionInfo{found}" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="match_count" />
      <dbType value="Int32" />
      <layout type="ComarchBI.SocialIntelligence.Common.Logger.JobCompleteLayoutPattern">
        <conversionPattern value="%actionInfo{processed}" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="log_type" />
      <dbType value="Int32" />
      <layout type="ComarchBI.SocialIntelligence.Common.Logger.JobCompleteLayoutPattern">
        <conversionPattern value="%actionInfo{jobtype}" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="message" />
      <dbType value="String" />
      <layout type="ComarchBI.SocialIntelligence.Common.Logger.JobCompleteLayoutPattern">
        <conversionPattern value="%actionInfo{message}" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="proid" />
      <dbType value="Int32" />
      <layout type="ComarchBI.SocialIntelligence.Common.Logger.JobCompleteLayoutPattern">
        <conversionPattern value="%actionInfo{profileid}" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="logid" />
      <dbType value="Int32" />
      <layout type="ComarchBI.SocialIntelligence.Common.Logger.JobCompleteLayoutPattern">
        <conversionPattern value="%actionInfo{logid}" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="detail" />
      <dbType value="String" />
      <layout type="ComarchBI.SocialIntelligence.Common.Logger.JobCompleteLayoutPattern">
        <conversionPattern value="%actionInfo{logdetails}" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="type_desc" />
      <dbType value="String" />
      <layout type="ComarchBI.SocialIntelligence.Common.Logger.JobCompleteLayoutPattern">
        <conversionPattern value="%actionInfo{typedesc}" />
      </layout>
    </parameter>
  </appender>

  <appender name="pgsqlRootApperner" type="log4net.Appender.AdoNetAppender">
    <connectionType value="Npgsql.NpgsqlConnection, Npgsql"/>
    <connectionString value="Server=ikar;Port=5432;Database=SocialBI_Main_PostsData;User Id=postgres;Password=postgres;" />
    <bufferSize value="1" />

    <commandText value="INSERT INTO reports_log (pk_reports_log_id, reports_log_start_time, reports_log_sender, profilepk_pro_id)
							VALUES (:logid, :log_date, :sender, :proid)" />

    <parameter>
      <parameterName value="log_date" />
      <dbType value="DateTime" />
      <layout type="log4net.Layout.RawTimeStampLayout" />
    </parameter>
    <parameter>
      <parameterName value="sender" />
      <dbType value="String" />
      <size value="255" />
      <layout type="ComarchBI.SocialIntelligence.Common.Logger.JobCompleteLayoutPattern">
        <conversionPattern value="%actionInfo{sender}" />
      </layout>
    </parameter>


    <parameter>
      <parameterName value="proid" />
      <dbType value="Int32" />
      <layout type="ComarchBI.SocialIntelligence.Common.Logger.JobCompleteLayoutPattern">
        <conversionPattern value="%actionInfo{profileid}" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="logid" />
      <dbType value="Int32" />
      <layout type="ComarchBI.SocialIntelligence.Common.Logger.JobCompleteLayoutPattern">
        <conversionPattern value="%actionInfo{logid}" />
      </layout>
    </parameter>

  </appender>


  <appender name="pgsqlErrorApperner" type="log4net.Appender.AdoNetAppender">
    <connectionType value="Npgsql.NpgsqlConnection, Npgsql"/>
    <connectionString value="Server=ikar;Port=5432;Database=SocialBI_Main_PostsData;User Id=postgres;Password=postgres;" />
    <bufferSize value="10" />

    <commandText value="INSERT INTO reports_log_err (rep_log_err_date, rep_log_err_message, rep_log_err_details, profilepk_pro_id)
							VALUES (:log_date, :message, :detail, :proid)" />

    <parameter>
      <parameterName value="log_date" />
      <dbType value="DateTime" />
      <layout type="log4net.Layout.RawTimeStampLayout" />
    </parameter>
    <parameter>
      <parameterName value="message" />
      <dbType value="String" />
      <layout type="ComarchBI.SocialIntelligence.Common.Logger.JobCompleteLayoutPattern">
        <conversionPattern value="%actionInfo{message}" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="proid" />
      <dbType value="Int32" />
      <layout type="ComarchBI.SocialIntelligence.Common.Logger.JobCompleteLayoutPattern">
        <conversionPattern value="%actionInfo{profileid}" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="detail" />
      <dbType value="String" />
      <layout type="ComarchBI.SocialIntelligence.Common.Logger.JobCompleteLayoutPattern">
        <conversionPattern value="%actionInfo{logdetails}" />
      </layout>
    </parameter>

  </appender>

  <appender name="ErrorFileAppender" type="log4net.Appender.RollingFileAppender">
    <file value="Logs\error.log" />
    <appendToFile value="true" />
    <rollingStyle value="Size" />
    <maxSizeRollBackups value="10" />
    <maximumFileSize value="100KB" />
    <staticLogFileName value="true" />
    <layout type="ComarchBI.SocialIntelligence.Common.Logger.JobCompleteLayoutPattern">
      <conversionPattern value="%newline %date [%thread] profileId: %actionInfo{profileid}, Message: %actionInfo{message}, %newlineDetails: %actionInfo{logdetails}" />
    </layout>
  </appender>


  <root>
    <level value="DEBUG" />
    <appender-ref ref="pgsqlDetailsApperner" />
  </root>
  <logger name="RootLogger">
    <level value="ALL" />
    <appender-ref ref="pgsqlRootApperner" />
  </logger>
  <logger name="ErrorLogger">
    <level value="ALL" />
    <appender-ref ref="ErrorFileAppender" />

  </logger>
</log4net>